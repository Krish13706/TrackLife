<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Gym Tracker</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet"/>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
</head>
<body>

<div class="page-transition-overlay" id="page-transition-overlay"></div>

<div class="screen-container">

    <!-- TOP NAV -->
    <div class="top-nav">
        <button class="back-btn" id="back-btn">
            <iconify-icon icon="lucide:arrow-left" style="font-size:20px;"></iconify-icon>
        </button>
        <h1 class="page-title" id="page-title-text">Gym Tracker</h1>
        <button class="add-btn" id="add-exercise-btn" style="display:none;">
            <iconify-icon icon="lucide:plus" style="font-size:20px;"></iconify-icon>
        </button>
    </div>

    <!-- TAB BAR -->
    <div class="tab-bar">
        <button class="tab-btn active" id="tab-calendar" onclick="switchTab('calendar')">
            <iconify-icon icon="lucide:calendar" style="font-size:15px;"></iconify-icon>
            Calendar
        </button>
        <button class="tab-btn" id="tab-workouts" onclick="switchTab('workouts')">
            <iconify-icon icon="lucide:dumbbell" style="font-size:15px;"></iconify-icon>
            Workouts
        </button>
    </div>

    <!-- ============================================================
         CALENDAR VIEW (default)
         ============================================================ -->
    <div class="view-pane" id="view-calendar">

        <!-- Month navigation -->
        <div class="cal-header">
            <button class="cal-nav-btn" onclick="calPrevMonth()">
                <iconify-icon icon="lucide:chevron-left" style="font-size:20px;"></iconify-icon>
            </button>
            <span class="cal-month-label" id="cal-month-label">Month Year</span>
            <button class="cal-nav-btn" onclick="calNextMonth()">
                <iconify-icon icon="lucide:chevron-right" style="font-size:20px;"></iconify-icon>
            </button>
        </div>

        <!-- Day-of-week headers -->
        <div class="cal-dow-row">
            <span>Sun</span><span>Mon</span><span>Tue</span>
            <span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
        </div>

        <!-- Calendar grid filled by JS -->
        <div class="cal-grid" id="cal-grid"></div>

        <!-- Legend -->
        <div class="cal-legend">
            <div class="legend-item"><span class="legend-dot dot-none"></span>No activity</div>
            <div class="legend-item"><span class="legend-dot dot-low"></span>1+ lifts</div>
            <div class="legend-item"><span class="legend-dot dot-mid"></span>5+ lifts</div>
            <div class="legend-item"><span class="legend-dot dot-high"></span>10+ lifts</div>
            <div class="legend-item"><span class="legend-dot dot-rest"></span>Rest day</div>
        </div>

    </div>

    <!-- ============================================================
         WORKOUTS VIEW
         ============================================================ -->
    <div class="view-pane hidden" id="view-workouts">

        <!-- Stats strip -->
        <div class="stats-strip">
            <div class="stat-card">
                <div class="stat-icon"><iconify-icon icon="lucide:dumbbell" style="font-size:14px;"></iconify-icon></div>
                <span class="stat-label">Top Lift</span>
                <span class="stat-value" id="stat-bench">â€”</span>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><iconify-icon icon="lucide:trending-up" style="font-size:14px;"></iconify-icon></div>
                <span class="stat-label">Progress</span>
                <span class="stat-value" id="stat-progress">0%</span>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><iconify-icon icon="lucide:activity" style="font-size:14px;"></iconify-icon></div>
                <span class="stat-label">Lifts</span>
                <span class="stat-value" id="stat-lifts">0</span>
            </div>
        </div>

        <!-- Exercise cards list -->
        <div class="content-scroll" id="exercises-list">
            <div class="empty-state" id="empty-state">
                <div class="empty-icon">
                    <iconify-icon icon="lucide:dumbbell" style="font-size:32px; color:var(--orange);"></iconify-icon>
                </div>
                <p class="empty-title">No exercises yet</p>
                <p class="empty-sub">Tap <strong>+</strong> to add your first lift</p>
            </div>
        </div>

    </div>

    <!-- FAB (workouts tab only) -->
    <button class="fab-add" id="fab-btn" style="display:none;">
        <iconify-icon icon="lucide:plus" style="font-size:26px;"></iconify-icon>
    </button>

    <!-- ===================== TIMER DOCK ===================== -->
    <div class="timer-dock" id="timer-dock">
        <div class="timer-collapsed" id="timer-collapsed" onclick="toggleTimerPanel()">
            <div class="timer-digits">
                <div class="digit-block" id="digit-m1">0</div>
                <div class="digit-block" id="digit-m2">0</div>
                <div class="digit-sep">:</div>
                <div class="digit-block" id="digit-s1">0</div>
                <div class="digit-block" id="digit-s2">0</div>
            </div>
            <div class="timer-status" id="timer-status">REST TIMER</div>
            <iconify-icon icon="lucide:chevron-up" id="timer-chevron" style="font-size:16px; color:var(--orange); opacity:0.7; transition: transform 0.3s ease;"></iconify-icon>
        </div>
        <div class="timer-panel" id="timer-panel">
            <div class="timer-panel-inner">
                <div class="timer-input-row">
                    <div class="timer-input-group">
                        <label class="timer-label">Minutes</label>
                        <input type="number" class="timer-input" id="timer-minutes" placeholder="3" min="0" max="99" inputmode="numeric">
                    </div>
                    <div class="timer-input-group">
                        <label class="timer-label">Seconds</label>
                        <input type="number" class="timer-input" id="timer-seconds" placeholder="0" min="0" max="59" inputmode="numeric">
                    </div>
                </div>
                <div class="timer-presets">
                    <button class="timer-preset" onclick="setPreset(1,0)">1m</button>
                    <button class="timer-preset" onclick="setPreset(1,30)">1m 30s</button>
                    <button class="timer-preset" onclick="setPreset(2,0)">2m</button>
                    <button class="timer-preset" onclick="setPreset(3,0)">3m</button>
                    <button class="timer-preset" onclick="setPreset(5,0)">5m</button>
                </div>
                <div class="timer-buttons">
                    <button class="timer-btn timer-reset" onclick="resetTimer()">
                        <iconify-icon icon="lucide:rotate-ccw" style="font-size:16px;"></iconify-icon> Reset
                    </button>
                    <button class="timer-btn timer-start" id="timer-start-btn" onclick="startTimer()">
                        <iconify-icon icon="lucide:play" style="font-size:16px;" id="timer-play-icon"></iconify-icon>
                        <span id="timer-btn-label">Start</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

</div><!-- end .screen-container -->

<!-- ============================================================
     DAY DETAIL PANEL (slides up from bottom)
     ============================================================ -->
<div class="day-backdrop" id="day-backdrop" onclick="closeDayPanel()">
    <div class="day-panel" id="day-panel" onclick="event.stopPropagation()">
        <div class="day-panel-handle"></div>
        <div class="day-panel-header">
            <div>
                <div class="day-panel-date" id="day-panel-date">Monday, Jan 1</div>
                <div class="day-panel-sub" id="day-panel-sub">0 exercises logged</div>
            </div>
            <button class="day-panel-close" onclick="closeDayPanel()">
                <iconify-icon icon="lucide:x" style="font-size:18px;"></iconify-icon>
            </button>
        </div>

        <!-- Rest Day Banner (shown when rest day) -->
        <div class="rest-banner" id="rest-banner" style="display:none;">
            <iconify-icon icon="lucide:leaf" style="font-size:28px; color:var(--green);"></iconify-icon>
            <div>
                <div class="rest-banner-title">Recovery Day</div>
                <div class="rest-banner-sub">Rest, stretch & recharge</div>
            </div>
        </div>

        <!-- Exercise log list -->
        <div class="day-log-list" id="day-log-list"></div>

        <!-- Empty state for day -->
        <div class="day-empty" id="day-empty" style="display:none;">
            <iconify-icon icon="lucide:moon" style="font-size:28px; color:var(--text-3);"></iconify-icon>
            <p>No activity logged</p>
        </div>

        <!-- Action buttons -->
        <div class="day-actions">
            <button class="day-action-btn rest-day-btn" id="rest-day-btn" onclick="toggleRestDay()">
                <iconify-icon icon="lucide:leaf" style="font-size:15px;"></iconify-icon>
                <span id="rest-day-btn-label">Mark as Rest Day</span>
            </button>
        </div>
    </div>
</div>

<!-- ADD EXERCISE MODAL -->
<div class="modal-backdrop" id="modal-backdrop">
    <div class="modal-sheet" id="modal-card">
        <div class="modal-handle"></div>
        <div class="modal-header">
            <h3 class="modal-title">Add Exercise</h3>
            <button class="modal-close" onclick="closeModal()">
                <iconify-icon icon="lucide:x" style="font-size:18px;"></iconify-icon>
            </button>
        </div>
        <div class="modal-body">
            <label class="form-label">Exercise Name</label>
            <input type="text" class="form-input" id="new-exercise-name" placeholder="e.g. Bench Press" autocomplete="off">
            <label class="form-label" style="margin-top:16px;">Goal (LBS) <span style="opacity:0.4;font-weight:400;">optional</span></label>
            <input type="number" class="form-input" id="new-exercise-goal" placeholder="e.g. 185" inputmode="decimal">
            <div class="quick-section">
                <span class="form-label">Quick Add</span>
                <div class="quick-grid">
                    <button class="qpick" onclick="setExerciseName('Bench Press')">Bench Press</button>
                    <button class="qpick" onclick="setExerciseName('Deadlift')">Deadlift</button>
                    <button class="qpick" onclick="setExerciseName('Squat')">Squat</button>
                    <button class="qpick" onclick="setExerciseName('OHP')">OHP</button>
                    <button class="qpick" onclick="setExerciseName('Pull Ups')">Pull Ups</button>
                    <button class="qpick" onclick="setExerciseName('Barbell Row')">Barbell Row</button>
                    <button class="qpick" onclick="setExerciseName('Incline Press')">Incline Press</button>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-cancel" onclick="closeModal()">Cancel</button>
            <button class="modal-confirm" onclick="addCustomExercise()">
                <iconify-icon icon="lucide:plus" style="font-size:15px;"></iconify-icon> Add
            </button>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
